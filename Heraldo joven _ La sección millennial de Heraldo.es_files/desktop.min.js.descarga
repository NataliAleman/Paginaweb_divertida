!function(){"use strict";const e=Date.now();const t=function(e){const t=new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)").exec(window.location.search);return t?decodeURIComponent(t[1].replace(/\+/g," ")):""},n="true"===t("hb_test");let o="true"===t("hb_debug")||n;const i=function(){return o},s=function(t){if(!o)return;let i;i="function"==typeof t?t():"object"==typeof t?JSON.stringify(t):t;const s=`display: inline-block; color: #fff; background: ${n?"tomato":"blue"}; padding: 1px 4px; border-radius: 3px`;console.log("%cAD",s,i+` ⏲ ${Date.now()-e}ms`)},r=function(e){o&&console.table(e)},c=function(e){if("complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState)return s(`DOM was already loaded (state: ${document.readyState})`),void e();document.addEventListener("DOMContentLoaded",(()=>{s("Event DOMContentLoaded"),e()}))},a=function(e,t,n={}){const o=document.createElement("script");o.async=!0,o.src=e,o.onload=()=>s(`Library ${t} loaded`);for(const[e,t]of Object.entries(n))o[e]=t;const i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(o,i),s(`Library ${t} injected, pending loading ...`)};void 0!==window.hb_now&&s(`Time waiting for starting the library: ${e-window.hb_now}ms`);const d=function(e){document.querySelector("head").insertAdjacentHTML("beforeend","<style>"+e+"</style>")},l=function(e,t){return"string"!=typeof e||e.length<=t?e:e.substring(0,t)},g=function(e,t){return Array.isArray(e)?e.map((e=>l(e,t))):l(e,t)};const u=["pos","infi_v","refresh"],f=function(e,t,{id:n=null,once:o=!1}={}){let i=!1;window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],googletag.cmd.push((()=>{googletag.pubads().addEventListener(e,(e=>{n&&n!==e.slot.getSlotElementId()||o&&i||(i=!0,t(e))}))}))},h=function(e){return(window.googletag&&window.googletag.apiReady?window.googletag.pubads().getSlots():[]).find((t=>t.getSlotElementId()===e))},p=function(e,t,n){0===n&&(n="0"),e.forEach((e=>{const o=h(e);o&&o.setTargeting(t,n)}))},m=function(e,t){e.map((e=>h(e))).filter(Boolean).forEach((e=>{e.getTargetingKeys().filter((e=>e.startsWith(t))).forEach((t=>{e.clearTargeting(t)}))}))},b=function(e){!function(e){m(e,"amzn")}(e),function(e){m(e,"hb_")}(e)};function y(e){"singleRequest"in e||(e.singleRequest=!0),"collapseEmptyDivs"in e||(e.collapseEmptyDivs=!0);const n=Array.isArray(e.modules)?e.modules:[];let o=!1;n.push({name:"fledge",init:function(){a("https://storage.googleapis.com/fledge-tests/otToken.js","Fledge OTToken")},exec:function(){const e=window.navigator.runAdAuction?"true":"false";googletag.pubads().setTargeting("fledge",e),s(`Fledge targeting set ${e}`)},configureOnce:function(){},configureSlot:function(){}}),function(){const e=t("entorno");return["demo","demo1","demo2","demo3"].includes(e)}()&&n.push(function(){const e=function(e){e.googleObject.getTargetingKeys().includes("entorno")&&(e.googleObject.clearTargeting("entorno"),s("Environment targeting removed from the slot"))};return{name:"environment-targeting",init:function(){},exec:function(){const e=t("entorno");googletag.pubads().setTargeting("entorno",e),s(`Environment targeting set ${e}`)},configureOnce:function(){},configureSlot:function(t){e(t)}}}());const c=function(e,t){const n=e.slot.getSlotElementId();let o=e.slot.getResponseInformation();o=o?JSON.stringify(o).replace(/(,|:)/g,"$1 "):"⛔ empty";const i="slotRenderEnded"===t&&e.size?` (${e.size})`:"";s(`Event ${t} for ${n}${i} ➡️ ${o}`)},d=function(e){googletag.cmd.push((()=>{s((()=>`Destroying Google Ads for ${e.map((e=>e.id)).join()}`)),googletag.destroySlots(e.map((e=>e.googleObject)))}))},l=function(e){if(!i())return;const t=e.map((e=>{const t={_id:e.id,_code:e.code};return e.googleObject.getTargetingKeys().sort(),e.googleObject.getTargetingKeys().forEach((n=>{t[n]=e.googleObject.getTargeting(n).join()})),t}));r(t)},f=function(e,t){if(e.googleObject=e.sizes.length?googletag.defineSlot(e.adUnit,e.sizes,e.id):googletag.defineOutOfPageSlot(e.adUnit,e.id),e.mappings){const t=googletag.sizeMapping();e.mappings.forEach((e=>t.addSize(e[0],e[1]))),e.googleObject.defineSizeMapping(t.build())}t.forEach((t=>e.googleObject.setTargeting(t.key,t.value))),n.forEach((t=>t.configureSlot(e))),e.googleObject.addService(googletag.pubads()),googletag.display(e.id)},h=function(e){s(`Redefine slot adunit & targetings ${e.id} (recreate slot)`);const t=(n=e.googleObject).getTargetingKeys().filter((e=>u.includes(e))).map((e=>({key:e,value:n.getTargeting(e)})));var n;d([e]),e.adUnit=e.newAdUnit;const o=[...t,...e.newTargetings];f(e,o)},p=function(e){var t;s(`Redefine slot targetings ${e.id}`),(t=e.googleObject).getTargetingKeys().forEach((e=>{u.includes(e)||t.clearTargeting(e)})),e.newTargetings.forEach((t=>{e.googleObject.setTargeting(t.key,t.value)})),n.forEach((t=>t.configureSlot(e)))};return function(){const t=document.createElement("script");t.async=!0,t.src="//securepubads.g.doubleclick.net/tag/js/gpt.js";const o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(t,o),s(`Google AdManager modules: ${n.map((e=>e.name)).join()||"none"}`),n.forEach((t=>t.init(e))),window.googletag=window.googletag||{},window.googletag.cmd=googletag.cmd||[],googletag.cmd.push((()=>{s("Google AdManager JS ready"),googletag.pubads().disableInitialLoad(),e.singleRequest&&googletag.pubads().enableSingleRequest(),e.collapseEmptyDivs&&(s("Enable collapseEmptyDivs"),googletag.pubads().collapseEmptyDivs(!1)),i()&&["slotResponseReceived","slotRenderEnded","slotOnload","impressionViewable"].forEach((e=>{googletag.pubads().addEventListener(e,(function(t){c(t,e)}))})),n.forEach((e=>e.exec())),googletag.enableServices()}))}(),{configure:function(t,i){i.forEach((n=>{const o=e.slots.find((e=>e.code===n.code));n.adUnit=e.adUnitPrefix+t.googleAdUnit+n.code,n.sizes=o.sizes,n.mappings=o.mappings||void 0,n.googleObject=void 0})),googletag.cmd.push((()=>{o||(n.forEach((e=>e.configureOnce())),o=!0);const e=t.targetings.map((e=>({key:e.key,value:g(e.value,40)})));i.forEach((t=>{f(t,e),t.googleObject.setTargeting("pos",t.code),t.googleObject.setTargeting("refresh","0"),t.googleObject.setTargeting("infi_v","0")}))}))},reconfigure:function(t,n){const o=t.targetings.map((e=>({key:e.key,value:g(e.value,40)})));n.forEach((n=>{if(n.newAdUnit=e.adUnitPrefix+t.googleAdUnit+n.code,n.newTargetings=o,i()){const e=JSON.stringify(n.newTargetings);s(`Save ${n.id} adunit (${n.newAdUnit}) & targetings (${e})`)}}))},updateSlotsBeforeFetch:function(e){googletag.cmd.push((()=>{e.forEach((e=>{e.newAdUnit&&e.adUnit!==e.newAdUnit?h(e):e.newTargetings&&p(e),e.newAdUnit=void 0,e.newTargetings=void 0}))}))},fetch:function(e){googletag.cmd.push((()=>{const t=e.map((e=>e.id));s(`Fetching Google Ads for ${t.join()}`),l(e),googletag.pubads().refresh(e.map((e=>e.googleObject)))}))},clear:function(e){googletag.cmd.push((()=>{s((()=>`Clearing Google Ads for ${e.map((e=>e.id)).join()}`)),googletag.pubads().clear(e.map((e=>e.googleObject)))}))},destroy:d,queue:function(e){const t=Math.random().toString(36).substring(2,7);s(`Google Ads queue: adding ${t}`),googletag.cmd.push((()=>{s(`Google Ads queue: running ${t}`),e()}))}}}function v(e,t,n,o=!1){const i=function(i){if(!function(t){const n=t.getSlotElementId();return n===e||0===n.indexOf(`${e}__`)}(i.slot))return;const r=i.slot.getResponseInformation(),c=!!r&&(r.lineItemId||r.sourceAgnosticLineItemId);if(s(`RichAudience Skin module ➡️ search: ${t} found: ${c}`),t!==c)return;const a=googletag.pubads().getSlots().filter((e=>-1!==n.indexOf(e.getSlotElementId())));a.length?(googletag.destroySlots(a),s(`RichAudience Skin module ➡️ ${n.join()} slots destroyed`),o&&n.forEach((e=>{document.querySelector(`#${e}`).parentElement.remove()}))):s(`⛔️ RichAudience Skin module ➡️ ${n.join()} not found`)};return{name:"rich-audience-skin",init:function(){},exec:function(){!function(e,{id:t=null,once:n=!1}={}){f("slotResponseReceived",e,{id:t,once:n})}(i)},configureOnce:function(){},configureSlot:function(){}}}const w=function(e){if(e.manager.adsSelector){const t=[...document.querySelectorAll(e.manager.adsSelector)].map((e=>e.id));return s(`Slots loaded from page: ${t.join()}`),t}const t=e.manager.slots.map((e=>e.code));return s(`Slots loaded from configuration: ${t.join()}`),t},S=function(){return!0===Didomi.getUserConsentStatusForVendor("google")},_=function(){return!1===Didomi.getUserConsentStatusForVendor("google")};function E(e,{interval:t=100,maxRetries:n=100}={}){const o=+new Date;let i=0;return new Promise(((r,c)=>{if(void 0!==window[e])return r(window[e]);s(`Wait: Checking global ${e} every ${t}ms ...`);const a=setInterval((()=>void 0!==window[e]?(clearInterval(a),s(`Wait: Global ${e} found after ${+new Date-o}ms`),r(window[e])):++i>=n?(clearInterval(a),s(`Wait: ⛔️ Global ${e} not found (${i} retries)`),c(`Global ${e} not found`)):void 0),t)}))}class ${constructor(e,t,n){this._UID=e,this._profile=t,this._customData=n}isAnonymous(){return!this._UID}getUID(){return this._UID}getProfile(){return this._profile}getEmail(){return!!this._profile&&this._profile.email}getCustomData(){return this._customData}dump(){return this.isAnonymous()?JSON.stringify({type:"anonymous"}):JSON.stringify({type:"authenticated",UID:this.getUID(),email:this.getEmail()})}}$.createAnonymousUser=function(){return new $(null,null,null)};class x{constructor(){if(x.instance)throw new Error("UsersService can not be instantiated more than once");x.instance=this,this._user=void 0,this._loadingUser=!1,this._loginHandlers=[],this._logoutHandlers=[],this._configureEventHandlers()}getUser(){return s("UsersService: Getting Gigya user ..."),this._loadingUser?function(e,{interval:t=100,maxRetries:n=100}={}){const o=+new Date;let i=0;return new Promise(((r,c)=>{if(e())return r(!0);s(`Wait: Checking condition every ${t}ms ...`);const a=setInterval((()=>e()?(clearInterval(a),s(`Wait: Condition succeeded after ${+new Date-o}ms`),r(!0)):++i>=n?(clearInterval(a),s(`Wait: ⛔️ Condition never succeeded (${i} retries)`),c("Condition never succeeded")):void 0),t)}))}((()=>!this._loadingUser)).then((()=>this.getUser())).catch((()=>(s("UsersService: ⛔️ Error waiting for user, using anonymous user"),$.createAnonymousUser()))):this._user?(s(`UsersService: User already loaded ${this._user.dump()}`),new Promise((e=>e(this._user)))):(this._loadingUser=!0,this._loadUser().then((e=>(this._loadingUser=!1,e))))}_loadUser(){return E("gigya").then((()=>new Promise((e=>{window.gigya.accounts.getAccountInfo({callback:t=>(this._user=this._createUserFromResponse(t),s(`UsersService: User loaded ${this._user.dump()}`),e(this._user))})})))).catch((()=>(s("UsersService: ⛔️ Error getting user, using anonymous user"),this._user=$.createAnonymousUser(),this._user)))}_createUserFromResponse(e,t=!0){return t&&0!==e.errorCode?$.createAnonymousUser():new $(e.UID,e.profile,e.data)}addLoginHandler(e){this._loginHandlers.push(e)}addLogoutHandler(e){this._logoutHandlers.push(e)}_configureEventHandlers(){E("gigya").then((()=>{window.gigya.accounts.addEventHandlers({onLogin:e=>{this._user=this._createUserFromResponse(e,!1),s(`UsersService: User login ${this._user.dump()}`),this._loginHandlers.forEach((e=>e(this._user)))},onLogout:()=>{this._user=$.createAnonymousUser(),s("UsersService: User logout"),this._logoutHandlers.forEach((e=>e()))}})}))}}const k=function(e=document){!function(e,t=document){t.querySelectorAll(e).forEach((e=>{s(`Remove slot ${e.id||e.className}`),e.remove()}))}(".ad-unit",e)};const R=function(e,{allowedIds:t=[],allowedAdvertisers:n=[],defaultMaxRefreshes:o=20,defaultMinVisibilityPercentage:r=.8,defaultMinSecondsToRefresh:c=30,defaultMinLiveInterval:a=3,deniedAdvertisers:d=[],customRules:l=[]}={}){const g=[],u={};let h=0;const m={maxRefreshes:o,minVisibilityPercentage:r,minSecondsToRefresh:c,minLiveInterval:a,collapsable:!0},y=function(){!function(e,{id:t=null,once:n=!1,ignoreEmpty:o=!0}={}){f("slotRenderEnded",(t=>{o&&t.isEmpty||e(t)}),{id:t,once:n})}((e=>{const t=e.slot.getSlotElementId();u[t]=e,v(e.slot)?S(t):_(t);const n=w(t);n&&(n.refreshing=!1),n&&n.refreshCounter>=n.rules.maxRefreshes&&_(t),g.length?$():x()}))},v=function(e){const o=e.getSlotElementId(),i=o.replace(/__.+/,"");if(t.length&&!t.includes(i))return!1;const s=e.getResponseInformation();if(!s)return O(`Empty response for ${o}`),!1;const r=s.advertiserId;return n.length&&!n.includes(r)?(O(`Advertiser ${r} not allowed for ${o}`),!1):!d.length||!d.includes(r)||(O(`Advertiser ${r} denied for ${o}`),!1)},w=function(e){return g.find((t=>t.id===e))},S=function(e){w(e)||(g.push({id:e,refreshCounter:0,refreshing:!1,secondsCounter:0,visible:!1,rules:E(e)}),O(`Add ${e} to refreshable slots`,!0))},_=function(e){const t=g.findIndex((t=>t.id===e));-1!==t&&(g.splice(t,1),O(`Remove ${e} from refreshable slots`,!0))},E=function(e){const t=e.replace(/__.+/,""),n=Object.assign({},m,l.find((e=>e.ids.includes(t)))||{});return n.safeguardLiveInterval=n.minSecondsToRefresh-n.minLiveInterval-1,n},$=function(){h||(O("Start slots visibility checker"),h=setInterval(k,1e3))},x=function(){h&&(O("Stop slots visibility checker"),clearInterval(h),h=0)},k=function(){g.forEach((e=>{const t=e.visible;e.visible=A(e),t&&!e.visible&&e.secondsCounter>e.rules.safeguardLiveInterval&&(e.secondsCounter=e.rules.safeguardLiveInterval)}));const e=g.filter((e=>e.visible));e.forEach((e=>{e.secondsCounter+=1}));const t=e.filter((e=>e.secondsCounter>=e.rules.minSecondsToRefresh));t.length&&(t.filter((e=>!e.rules.collapsable)).forEach((e=>R(e.id))),z(t))},R=function(e){const t=u[e],n=t?function(e){if(e.isEmpty||!e.size)return 0;if(1===e.size[0]&&1===e.size[1]){const t=e.slot.getTargeting("hb_size");if(t.length){const e=t[0].split("x");return parseInt(e[1])}}return e.size[1]}(t):0;if(!n)return;const o=document.getElementById(e);(parseInt(o.style.minHeight.replace("px",""))||0)<n&&(o.style.minHeight=`${n}px`)},A=function(e){const t=document.getElementById(e.id);return t?!e.refreshing&&T(t)>=e.rules.minVisibilityPercentage:(_(e.id),!1)},T=function(e){let t=e.getBoundingClientRect();if(0===t.height){const n=e.firstElementChild;n&&(t=n.getBoundingClientRect())}return t.top>=window.innerHeight||t.bottom<=0?0:t.top>=0&&t.bottom<=window.innerHeight||t.top<0&&t.bottom>window.innerHeight?1:t.top<0?(t.height+t.top)/t.height:(t.height-t.bottom+window.innerHeight)/t.height},z=function(t){const n=t.map((e=>e.id));t.forEach((e=>{var t,n;e.secondsCounter=0,e.refreshCounter+=1,e.refreshing=!0,t=[e.id],n=e.refreshCounter,p(t,"refresh",function(e){return e>=20?20:e}(n))})),O(`Refresh ${n.join()}`,!0),b(n),e.fetch(n)},j=function(){var e;e=e=>e.forEach((e=>_(e))),document.addEventListener("hnads.destroy",(t=>{e(t.detail)}))},I=function(){document.addEventListener("visibilitychange",C)},C=function(){const e=document.visibilityState;O(`Event visibilitychange ${e}`),"hidden"!==e?g.length&&$():x()},O=function(e,t=!1){if(i()){if(t){const t=(e,t)=>"rules"===e?void 0:t;e=e+"\n"+JSON.stringify(g,t)}s(`SmartRefresher: ${e}`)}};O("Start"),y(),j(),I()},A=[4467651967,734225901,1532241141,751123221,0],T=function(e){return e.google.slots.filter((e=>!e.sizes.empty&&Array.isArray(e.sizes[0]))).filter((e=>"sticky"!==e.code.toLowerCase())).map((e=>e.code))},z=function(e){const t=document.cookie.split("; ").find((t=>t.startsWith(`${e}=`)));return t?t.slice(e.length+1):null},j=function(e){return function(e){return s(`Wait: For CMP (${e}) ...`),E("__tcfapi",{interval:20,maxRetries:1e3})}(e).then((()=>(s(`Wait: For CMP consent information (${e}) ...`),new Promise(((t,n)=>{window.__tcfapi("addEventListener",2,((o,i)=>{if(!i){const e=JSON.stringify(o);return s(`Wait: ⛔️ Error listening for consent (${e})`),n(e)}if("tcloaded"===o.eventStatus||"useractioncomplete"===o.eventStatus)return window.__tcfapi("removeEventListener",2,(()=>{}),o.listenerId),s(`Wait: CMP consent information available (${e})`),t(o)}))})))))};const I=function(e,t,{code:n="Intext",selector:o=".article-text > p",site:i="20minutos"}={}){if(!e)return;const r=e.querySelectorAll(o);C(r,t),t.forEach((function(e,t){if(r.length<=e)return;const o=0===t?n:`${n}${t+1}`;r[e-1].insertAdjacentHTML("afterend",function(e,t){return["heraldo","daa"].includes(e)?`<div id="${t}" class="ad-unit intext"></div>`:`<div id="axds-${t}" class="axds"><div id="${t}" class="henneoHB"></div></div>`}(i,o)),s(`Injected ${o} ad after ${e} blocks`)}))},C=function(e,t){t.forEach((function(t,n){if(e.length<=t)return;const o=`__hn_teads${n+1}`;e[t-1].insertAdjacentHTML("afterend",`<div id="${o}" class="__hn_teads ${o}"></div>`),s(`Injected ${o} mark after ${t} blocks`)}))},O=function({heraldoSite:e=!1,lainfoSite:t=!1}={}){const n=document.querySelector(".content-modules");if(!n)return;const o=[...n.querySelectorAll(":scope > div, :scope > p")].filter(((e,t)=>0!==t||!e.classList.contains("special-free-html-ad"))).filter((e=>{const t=e.innerHTML.trim();return 0!==t.length&&"&nbsp;"!==t}));[2,5,7].forEach((function(n,i){if(o.length>n){const r=function(n){let o=`<div id="axds-Right${n+1}" class="axds">\n      <div id="Right${n+1}" class="henneoHB"></div>\n      </div>`;return e&&(o=`<div id="right${n+1}" class="ad-unit"></div>`),t&&(o=`<div class="axds axds-Right"><div id="right${n+1}" class="henneoHB henneoHB-right"></div></div>`),o}(i);o[n-1].insertAdjacentHTML("afterend",r),s(`Injected right ad after ${n} blocks`)}}))};const U=function(e="dataLayer"){return Array.isArray(window[e])?"object"!=typeof(t=window[e][0])||Array.isArray(t)||null===t?{}:window[e][0]:{};var t},P=window.location.pathname;let L;const D=/^\/tags/,F=/^\/multimedia/,B=/^\/multimedia\/imagenes/,M=/^\/multimedia\/videos/,G=function(){return L||H(U()),L},H=function(e){L={contentId:e.noticia_id,disabled:"0"===e.ads,layout:e.layout,mainCategory:Y(e.categoria),secondaryCategory:Y(e.subcategoria),tags:e.seotag?e.seotag.split(",").filter(Boolean):[],tertiaryCategory:Y(e.terciariacategoria)}},q=function(){const e=G();return e.disabled||"articulo_patrocinado"===e.layout||"paginas_libres"===e.layout},N=function(){return"home"===G().layout},W=function(){return"subhome"===G().layout},J=function(){const e=G().layout;return"articulo"===e||"articulo_opinion"===e},K=function(e){if(e.isAnonymous())return!1;const t=e.getCustomData();return!!(t.role&&t.role.idTipoSuscriptor&&[1,3].includes(t.role.idTipoSuscriptor))},V=function(){return window.location.hostname.match(/local/)},Y=function(e){return"sinc"===e||"sinsc"===e||"sinct"===e?"":e};class X extends class{load(){window.googlefc=window.googlefc||{},window.googlefc.callbackQueue=window.googlefc.callbackQueue||[],this._loadCustom(),this._loadCommon()}_loadCustom(){window.googlefc.controlledMessagingFunction=e=>{s("Google Funding Choices: Proceed"),e.proceed(!0)},this._loadDebug()}_loadDebug(){window.googlefc.callbackQueue.push({AD_BLOCK_DATA_READY:()=>{const e=window.googlefc.getAdBlockerStatus();if(s(`Google Funding Choices: AdBlocker status ${e}`),1===e||2===e){const e=window.googlefc.getAllowAdsStatus();s(`Google Funding Choices: Allowed ads status ${e}`)}}})}_loadCommon(){a("https://fundingchoicesmessages.google.com/i/pub-3117709661232544?ers=1","Google Funding Choices"),function e(){if(!window.frames.googlefcPresent)if(document.body){const e=document.createElement("iframe");e.style="width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;",e.style.display="none",e.name="googlefcPresent",document.body.appendChild(e)}else setTimeout(e,0)}()}}{constructor(e){super(),this.usersService=e}_loadCustom(){s("Google Funding Choices: Custom Heraldo version"),window.googlefc.controlledMessagingFunction=e=>{this.usersService.getUser().then((t=>{if(K(t))return s("Google Funding Choices: Ignore (user is subscriber)"),void e.proceed(!1);s("Google Funding Choices: Proceed (non subscriber user)"),e.proceed(!0)}))},super._loadDebug()}}function Q(e){e&&H(e);const t=G(),n=t.contentId,o=t.layout,i=t.mainCategory,s=t.secondaryCategory,r=t.tags,c=t.tertiaryCategory,a=function(e){return P.match(D)?"tags/portada/":P.match(F)?W()&&P.match(M)?"general"===e?"videos/portada/":`${e}/video/`:W()&&P.match(B)?"general"===e?"fotogalerias/portada/":`${e}/fotogaleria/`:"multimedia/portada/":`${e}/portada/`};return{googleAdUnit:function(){const e=function(){switch(i){case"aragon":case"huesca":case"teruel":case"zaragoza":return"local";case"cultura y ocio":case"ocio-y-cultura":return"cultura";case"branded":return"bc";default:return i||"general"}}();switch(o){case"articulo":case"articulo_especial":case"articulo_opinion":return`${e}/noticia/`;case"articulo_patrocinado":return"patrocinadas/noticia/";case"directo":return"directo/noticia/";case"galeria":return`${e}/fotogaleria/`;case"home":return"home/portada/";case"tag_subhome":return"tags/portada/";case"video":return`${e}/video/`;case"subhome":return a(e);default:return"general/noticia/"}}(),targetings:function(){const e=[],t=[i,s,c].filter(Boolean);return o&&e.push({key:"ha_page",value:o}),t.length&&e.push({key:"ha_secc",value:t}),r.length&&e.push({key:"ha_tema",value:r}),n&&e.push({key:"ha_id",value:n}),V()&&e.push({key:"entorno",value:"local"}),e}()}}function Z(){return{name:"citiservi-segments",init:function(){},exec:function(){},configureOnce:function(){const e=z("btrseg");e?(s(`CitiserviSegments: Set targeting ${e}`),googletag.pubads().setTargeting("cservi_segments",e.split(","))):s("CitiserviSegments: Ignore targeting because cookie is empty")},configureSlot:function(){}}}function ee(e=!1){e=e||{fetchMarginPercent:300,renderMarginPercent:150,mobileScaling:1};return{name:"lazy-loading",init:function(){},exec:function(){googletag.pubads().enableLazyLoad(e)},configureOnce:function(){},configureSlot:function(){}}}function te(){const e=function(){return function(){const e="adstest";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}()?window.localStorage.getItem("_pr_active_segments_admngr"):""};return{name:"prometeo-segments",init:function(){},exec:function(){},configureOnce:function(){const t=e();s(`Setting Prometeo Segments targeting: ${t}`),googletag.pubads().setTargeting("pr_alayans_seg",t?t.split(","):[])},configureSlot:function(){}}}function ne(e=!1,t=null){const n=function(){var t,n,o;window._PROMETEO_MEDIA_SU=window._PROMETEO_MEDIA_SU||(o="_SUIPROMETEO",t=document.cookie.match("(^|;)\\s*"+o+"\\s*=\\s*([^;]+)"),void(n=t?t.pop():"0"),"0"===n&&function(){var e=new XMLHttpRequest;e.open("GET","https://cmanager-prometeo.appspot.com/v1"),e.withCredentials=!0,e.onreadystatechange=function(){4==this.readyState&&200==this.status&&function(e){n=e||"0";var t=new Date;t.setTime(t.getTime()+2592e6),document.cookie=o+"="+n+"; expires="+t.toGMTString()+"; path=/"}(e.responseText)},e.send()}(),{read:function(){return n}}),s(`Loading Prometeo Superuser (PPID ${e?"enabled":"disabled"})`)};return{name:"prometeo-superuser",init:function(){j("PrometeoSuperuser").then((e=>{e.purpose.consents[1]?n():s("⛔️ Prometeo Superuser code not loaded (consent rejected)")}))},exec:function(){},configureOnce:function(){const t=void 0!==window._PROMETEO_MEDIA_SU&&"function"==typeof window._PROMETEO_MEDIA_SU.read?window._PROMETEO_MEDIA_SU.read():"-1";s(`Setting Prometeo Superuser targeting: ${t}`),googletag.pubads().setTargeting("su_prometeo",t),e&&t.length>=36&&(s("Setting PPID & user logged targetting"),googletag.pubads().setPublisherProvidedId(t))},configureSlot:function(){}}}function oe(e){return e.cmpTimeout="cmpTimeout"in e?e.cmpTimeout:50,{pubID:"3661",deals:!0,adServer:"googletag",gdpr:{cmpTimeout:e.cmpTimeout}}}function ie(e){return e.cmpTimeout="cmpTimeout"in e?e.cmpTimeout:50,{priceGranularity:"dense",enableSendAllBids:!1,consentManagement:{gdpr:{cmpApi:"iab",defaultGdprScope:!0,timeout:e.cmpTimeout}},userSync:{filterSettings:{all:{bidders:"*",filter:"include"}},userIds:[]}}}var se={manager:{adsSelector:".henneoHB",timeout:3e3},amazon:{init:oe({}),timeout:1300},prebid:{jsUrl:"https://hb.20m.es/prebid/7.14.0.js",init:ie({}),analytics:[],bidders:{criteo:{network:3340}},timeout:1300}};const re={OutOfPage:[],Top:[[1,1],[728,90],[950,90],[970,90],[970,250],[980,50],[980,90],[980,250],[990,90],[990,200],[990,250]],SmallTop:[[1,1],[728,90],[950,90],[970,90],[980,50],[980,90],[990,90]],Right:[[300,250],[300,300],[300,600]],Button:[[300,250],[300,300]],Left:[[580,400],[655,400]],LeftSky:[[120,600],[160,600],[480,1e3]],RightSky:[[120,600],[120,601],[160,600],[160,601],[480,1001]],Fluid:["fluid"]},ce={OutOfPage:re.OutOfPage,Top:re.Top,Right:re.Right,LeftSky:[[120,600],[120,800],[160,600],[160,800],[480,1e3]],RightSky:[[120,600],[120,601],[120,800],[120,801],[160,600],[160,601],[160,800],[160,801],[480,1001]],Fluid:re.Fluid},ae={LeftSky:[[[1120,0],ce.LeftSky],[[0,0],[]]],RightSky:[[[1120,0],ce.RightSky],[[0,0],[]]]},de={FullTop:[[728,90],[970,90],[970,250]],SmallFullTop:[[728,90],[970,90]],Top:[[728,90],[970,250]],SmallTop:[[728,90]],Right:[[300,250],[300,300],[300,600]],Button:[[300,250],[300,300]],Left:[[580,400],[655,400]],Sky:[[120,600],[160,600]]};var le={manager:{slots:[{code:"x01"},{code:"x31"},{code:"x41"},{code:"top"},{code:"bottom"},{code:"right1"},{code:"right2"},{code:"right3"},{code:"right4"},{code:"right5"},{code:"right6"},{code:"right7"},{code:"right8"},{code:"right9"},{code:"right10"},{code:"intext"},{code:"intext2"},{code:"nativefluid"}],adsSelector:".ad-unit",getPageConfigFn:void 0,beforeLoadAdsFn:void 0,timeout:5e3},loader:{name:"didomi-paywall"},google:{adUnitPrefix:"/34616581,22653889300/heraldo.es/",slots:[{code:"x01",sizes:ce.OutOfPage},{code:"x31",sizes:ce.LeftSky,mappings:ae.LeftSky},{code:"x41",sizes:ce.RightSky,mappings:ae.RightSky},{code:"top",sizes:ce.Top},{code:"bottom",sizes:ce.Top},{code:"right1",sizes:ce.Right},{code:"right2",sizes:ce.Right},{code:"right3",sizes:ce.Right},{code:"right4",sizes:ce.Right},{code:"right5",sizes:ce.Right},{code:"right6",sizes:ce.Right},{code:"right7",sizes:ce.Right},{code:"right8",sizes:ce.Right},{code:"right9",sizes:ce.Right},{code:"right10",sizes:ce.Right},{code:"intext",sizes:ce.OutOfPage},{code:"intext2",sizes:ce.OutOfPage},{code:"nativefluid",sizes:ce.Fluid}],modules:[Z(),ee(),ne(!0,"gcu_her"),te(),v("top",5313320389,["x31","x41"])]},amazon:{page:"/34616581/heraldo.es_portada/",slots:[{code:"x31",sizes:de.Sky},{code:"x41",sizes:de.Sky},{code:"top",sizes:de.Top},{code:"right1",sizes:de.Right},{code:"right2",sizes:de.Right},{code:"right3",sizes:de.Right},{code:"right4",sizes:de.Right},{code:"right5",sizes:de.Right},{code:"right6",sizes:de.Right},{code:"right7",sizes:de.Right},{code:"right8",sizes:de.Right},{code:"right9",sizes:de.Right}],init:oe({cmpTimeout:500}),timeout:1600},prebid:{slots:[{code:"x31",sizes:de.Sky},{code:"x41",sizes:de.Sky},{code:"top",sizes:de.FullTop},{code:"right1",sizes:de.Right},{code:"right2",sizes:de.Right},{code:"right3",sizes:de.Right},{code:"right4",sizes:de.Right},{code:"right5",sizes:de.Right},{code:"right6",sizes:de.Right},{code:"right7",sizes:de.Right},{code:"right8",sizes:de.Right},{code:"right9",sizes:de.Right}],bidders:[{name:"appnexus",slots:{x31:12923176,x41:12923178,top:12923184,right1:12923182,right2:12923183,right3:12923179,right4:12923180,right5:12923181,right6:15820036,right7:15820043,right8:15820133,right9:15820485}},{name:"criteo",publisherSub:"ha_heraldo_desktop",network:se.prebid.bidders.criteo.network,slots:{x31:!0,x41:!0,top:!0,right1:!0,right2:!0,right3:!0,right4:!0,right5:!0,right6:!0,right7:!0,right8:!0,right9:!0}},{account:17212,name:"rubicon",site:178852,slots:{x31:870126,x41:870130,top:870112,right1:870066,right2:870068,right3:870032,right4:870056,right5:870062,right6:1273684,right7:1273694,right8:1273696,right9:1273698}},{name:"smartadserver",page:1016917,site:271677,slots:{x31:70220,x41:70220,top:70235,right1:70223,right2:70223,right3:70223,right4:70223,right5:70223,right6:70223,right7:70223,right8:70223,right9:70223}},{name:"richaudience",supplyType:"site",slots:{x31:"PmrbRFYXxj",x41:"1Ffdf3Agbv",top:["1axqtGuKRf","0XGpBN3wjE"],right1:"ELSRGGgo9m",right2:"09pktCEufC",right3:"IHjzoUl5KR",right4:"17PyoKpEuX",right5:"1bFAJX8gGb",right6:"1LhxH8dWcC",right7:"0Rk9kelWxc",right8:"t6Ug9c4A9q",right9:"1Jo5Yr9ZhH"}}],jsUrl:se.prebid.jsUrl,init:ie({cmpTimeout:500}),analytics:se.prebid.analytics,timeout:1600}};var ge={manager:{slots:[{code:"x01"},{code:"x31"},{code:"x41"},{code:"top"},{code:"bottom"},{code:"right1"},{code:"right2"},{code:"right3"},{code:"right4"},{code:"right5"},{code:"right6"},{code:"right7"},{code:"right8"},{code:"right9"},{code:"right10"},{code:"intext"},{code:"intext2"},{code:"nativefluid"}],adsSelector:".ad-unit",getPageConfigFn:void 0,beforeLoadAdsFn:void 0,timeout:4e3},loader:{name:"didomi-paywall"},google:{adUnitPrefix:"/34616581,22653889300/heraldo.es/",slots:[{code:"x01",sizes:ce.OutOfPage},{code:"x31",sizes:ce.LeftSky,mappings:ae.LeftSky},{code:"x41",sizes:ce.RightSky,mappings:ae.RightSky},{code:"top",sizes:ce.Top},{code:"bottom",sizes:ce.Top},{code:"right1",sizes:ce.Right},{code:"right2",sizes:ce.Right},{code:"right3",sizes:ce.Right},{code:"right4",sizes:ce.Right},{code:"right5",sizes:ce.Right},{code:"right6",sizes:ce.Right},{code:"right7",sizes:ce.Right},{code:"right8",sizes:ce.Right},{code:"right9",sizes:ce.Right},{code:"right10",sizes:ce.Right},{code:"intext",sizes:ce.OutOfPage},{code:"intext2",sizes:ce.OutOfPage},{code:"nativefluid",sizes:ce.Fluid}],modules:[Z(),ee(),ne(!0,"gcu_her"),te(),v("top",5313320389,["x31","x41"])]},amazon:{page:"/34616581/heraldo.es_interior/",slots:[{code:"x31",sizes:de.Sky},{code:"x41",sizes:de.Sky},{code:"top",sizes:de.Top},{code:"right1",sizes:de.Right},{code:"right2",sizes:de.Right},{code:"right3",sizes:de.Right}],init:oe({cmpTimeout:500}),timeout:1600},prebid:{slots:[{code:"x31",sizes:de.Sky},{code:"x41",sizes:de.Sky},{code:"top",sizes:de.FullTop},{code:"right1",sizes:de.Right},{code:"right2",sizes:de.Right},{code:"right3",sizes:de.Right}],bidders:[{name:"appnexus",slots:{x31:12923176,x41:12923178,top:12923175,right1:12923172,right2:12923173,right3:12923174}},{name:"criteo",publisherSub:"ha_heraldo_desktop",network:se.prebid.bidders.criteo.network,slots:{x31:!0,x41:!0,top:!0,right1:!0,right2:!0,right3:!0}},{account:17212,name:"rubicon",site:178852,slots:{x31:870126,x41:870130,top:870124,right1:869936,right2:869960,right3:870122}},{name:"smartadserver",page:1016916,site:271677,slots:{x31:70220,x41:70220,top:70235,right1:70223,right2:70223,right3:70223}},{name:"richaudience",supplyType:"site",slots:{x31:"PmrbRFYXxj",x41:"1Ffdf3Agbv",top:["yvx6Pq2Dp2","0XGpBN3wjE"],right1:"jLV378ZYir",right2:"1JWQpqHYAM",right3:"19wIGRcbtK"}}],jsUrl:se.prebid.jsUrl,init:ie({cmpTimeout:500}),analytics:se.prebid.analytics,timeout:1600}};const ue=new class extends x{constructor(){super()}_loadUser(){return E("gigyaData").then((()=>(this._user=this._createUserFromGlobalVariables(),s(`UsersService: Loaded user ${this._user.dump()}`),this._user))).catch((()=>(s("UsersService: ⛔️ Error getting user, using anonymous user"),this._user=$.createAnonymousUser(),this._user)))}_createUserFromGlobalVariables(){return new $(window.userUID,window.gigyaProfile,window.gigyaData)}};!function(e,{offsetTop:t=0,paddingTop:n=10,closeTimeout:o=3e3}){const i="__hnads_sticky_top",r=`.${i} {\n      position:fixed;\n      top:${t}px;\n      left:0;\n      right:0;\n      z-index:25;\n      height:auto !important;\n      width:100% !important;\n      max-width:990px;\n      margin:0px auto;\n      padding-top:${n}px;\n      padding-bottom:10px;\n      background:#fff;\n  }`;let c,a,l;const g=function(){u()?(d(r),h()):s("StickyTop: Behaviour is not enabled because slot is visible")},u=function(){return c.getBoundingClientRect().top<0},h=function(){a.classList.add(i),l=window.setTimeout(p,o),document.addEventListener("scroll",m,!0),s("StickyTop: Enabled sticky behaviour")},p=()=>{a.classList.remove(i),clearTimeout(l),document.removeEventListener("scroll",m,!0),s("StickyTop: Disabled sticky behaviour")},m=()=>{(0===window.scrollY||c.getBoundingClientRect().top>=t+n)&&p()};!function(e,{id:t=null,once:n=!1}={}){f("slotOnload",e,{id:t,once:n})}((t=>{t.slot.getResponseInformation()?(c=document.getElementById(e),c?(a=c.firstElementChild,s(`StickyTop: Slot detected ${e}`),g()):s(`StickyTop: ⛔️ Invalid DOM element ${e}`)):s(`StickyTop: ⛔️ Empty response ${e}`)}),{id:e,once:!0})}("top",{offsetTop:50}),function(e){const t=function(e){return e.vendor.consents[1080]&&e.purpose.consents[1]&&e.purpose.consents[2]&&e.purpose.consents[3]&&e.purpose.consents[4]&&e.purpose.consents[5]&&e.purpose.consents[6]&&e.purpose.consents[7]&&e.purpose.consents[8]&&e.purpose.consents[9]&&e.purpose.consents[10]},n=function(t){const n=void 0!==window._PROMETEO_MEDIA_SU&&"function"==typeof window._PROMETEO_MEDIA_SU.read?window._PROMETEO_MEDIA_SU.read():"-1",o=z("_btrid");return t=encodeURIComponent(t),`https://dmp.citiservi.es/pxtrack.js?m=2&sid=${e}&p=vvbtlaox&bt=${o}&id=${n}&ref=${t}`},o=function(){const t=n(window.location.href);a(t,`CitiserviPixel (${e})`)},i=function(){document.addEventListener("is.history",(t=>{const o=t.detail.path||window.location.href,i=n(o);a(i,`CitiserviPixel (${e}) in infinite scroll (${o})`)}))};j("CitiserviPixel").then((e=>{t(e)?(s("CitiserviPixel: Consent accepted ➡️ Load library"),o(),i()):s("CitiserviPixel: Consent rejected ➡️ ⛔️ Library not loaded")}))}(5632),function(e=!1){const t=document.createElement("script");t.async=!0,t.src="https://pghub.io/js/pandg-sdk.js",t.onload=function(){window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((function(t){if(!0===t.getUserConsentStatusForVendor(89)&&!0===t.getUserConsentStatusForVendor(577)){const n={gdpr:1,gdpr_consent:t.getUserStatus().consent_string,ccpa:null,bp_id:"bluemedia"},o={name:"P&G",pixelUrl:"https://pandg.tapad.com/tag"},i=window.Tapad.init(n,o),r={category:e||""};i.sync(r).then(console.log),s("Library P&G injected")}else s("Didomi consent rejected, Library P&G not loaded")}))};const n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}(G().mainCategory),function(e){const t=function(e){return e.purpose.consents[1]},n=function(){window.teads_analytics=window.teads_analytics||{},window.teads_analytics.analytics_tag_id=e,window.teads_analytics.share=window.teads_analytics.share||function(){(window.teads_analytics.shared_data=window.teads_analytics.shared_data||[]).push(arguments)};a("https://a.teads.tv/analytics/tag.js",`TeadsUserId (${e})`)};j("TeadsUserId").then((e=>{t(e)?(s("TeadsUserId: Consent accepted ➡️ Load library"),n()):s("TeadsUserId: Consent rejected ➡️ ⛔️ Library not loaded")}))}("PUB_10133"),function(e){const t=function(t){const n=t.tcString,o=Date.now();document.body.insertAdjacentHTML("afterend",`<img src=https://${e}.tpid.es/publisher?gpdr=1&gdpr_consent=${n}&t=${o} style="width: 1px; height: 1px;"/>`)};j("TelefonicaPixel").then((e=>{s("TelefonicaPixel: Load Pixel"),t(e)}))}("h3");const fe=N()?le:ge;V()&&function(e){e.google.adUnitPrefix=e.google.adUnitPrefix.replace(/,\d+/,"")}(fe),fe.manager.getPageConfigFn=Q,fe.manager.beforeLoadAdsFn=(e,t,n)=>{if(q())return k(),!1;if(window.location.hostname.match(/admin/))return d("\n#x01, #x31, #x41 {display:none !important;}\n"),document.querySelectorAll(".ad-unit").forEach((e=>{const t=e.id||e.className;e.innerHTML=`<span>Publicidad ${t}</span>`,e.classList.add("ad-admin")})),!1;if((N()||W())&&([...document.querySelectorAll(".ad-unit")].filter((e=>e.id.includes("right"))).forEach((e=>e.classList.add("ad-unit-dynamic-right"))),function(e,t,{firstWithoutIndex:n=!1,context:o=document}={}){o.querySelectorAll(e).forEach(((o,i)=>{const r=n?0===i?t:t+i:t+(i+1);s(`Rename dynamic ${e} to #${r}`),o.id=r}))}(".ad-unit-dynamic-right","right")),J()){const e=document.querySelector(".container-grid-cell > .article-content");I(e,[2,5],{code:"intext",selector:document.querySelectorAll(".interview-line").length>=1?".interview-line":".content-modules > p",site:"heraldo"})}if("articulo_especial"===G().layout){const e=["x01","x31","x41"];document.querySelectorAll(".ad-unit").forEach((t=>{e.includes(t.id)&&t.remove()})),O({heraldoSite:!0})}return R(n,function(e){return{allowedIds:T(e),allowedAdvertisers:[...A,605220621,2019300021,2104793061,2236549461,4599570866]}}(e)),J()&&new X(ue).load(),!0},function(e,t,n){const o=n.map((e=>`disabled-${e}`)),i=function(e){K(e)?r():c()},r=function(){t.manager.slots.filter((e=>n.includes(e.code))).forEach((e=>{s(`RemoveAdsForSubscribers: Disabled ${e.code} ad`),e.code=`disabled-${e.code}`}))},c=function(){t.manager.slots.filter((e=>o.includes(e.code))).forEach((e=>{e.code=e.code.replace("disabled-",""),s(`RemoveAdsForSubscribers: Enabled ${e.code} ad`)}))};e.getUser().then((e=>i(e))),e.addLoginHandler((e=>i(e))),e.addLogoutHandler((()=>c())),s("RemoveAdsForSubscribers: Configured")}(ue,fe,["intext","intext2"]);const he=function(e){let t,n;const o=function(){return e.enabled},i=function(){"function"==typeof e.blockedSlotsCodes&&(e.blockedSlotsCodes=e.blockedSlotsCodes())},r=function(){s("Paywall: Configuring listener"),document.addEventListener("blockContent",(function(e){t=!0===e.blockedContent,s(`Paywall: Event "blockContent" received: ${t}`),n&&(s("Paywall: Running Ads callback"),n(t),n=void 0)}))};return o()&&r(),{isEnabled:o,isUnknownState:function(){return void 0===t},isUnblockedState:function(){return!1===t},isBlockedState:function(){return!0===t},setExternalCallback:function(e){n=e},getBlockedSlotsCodes:function(t){return i(),t.filter((t=>{const n=t.replace(/__.+/,"");return e.blockedSlotsCodes.includes(n)}))},getUnblockedSlotsCodes:function(t){return i(),t.filter((t=>{const n=t.replace(/__.+/,"");return!e.blockedSlotsCodes.includes(n)}))}}}({enabled:J(),blockedSlotsCodes:["intext","intext2"]}),pe=function(e){let t;const n=[];let o=[];return s("Loading Ads library"),t=y(e.google),e.amazon&&e.amazon.slots&&e.amazon.slots.length&&n.push(function(e){const t=function(e){i()&&(e&&e.length?(e[0].targeting&&(e=e.map((e=>Object.assign({},{slotID:e.slotID,size:e.size,mediaType:e.mediaType},e.targeting)))),r(e)):s("⛔️ No Amazon bids responses"))};return function(e,t,n,o,i,r,c){function a(n,o){t[e]._Q.push([n,o])}t[e]||(t[e]={init:function(){a("i",arguments)},fetchBids:function(){a("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},dpa:function(){a("di",arguments)},rpa:function(){a("ri",arguments)},upa:function(){a("ui",arguments)},_Q:[]},(r=n.createElement(o)).async=!0,r.onload=function(){s("Amazon JS loaded")},r.src="//c.amazon-adsystem.com/aax2/apstag.js",(c=n.getElementsByTagName(o)[0]).parentNode.insertBefore(r,c))}("apstag",window,document,"script"),apstag.init(e.init),{id:"amazon",configure:function(t,n){const o=e.page+(t.amazonAdUnit?t.amazonAdUnit:"");n.forEach((t=>{t.amazonObject=void 0;const n=e.slots.find((e=>e.code===t.code));n&&(t.amazonObject={slotID:t.id,slotName:o+t.code.toLowerCase(),sizes:n.sizes})}))},fetch:function(n,o){const i=n.map((e=>e.id)),r=n.filter((e=>e.amazonObject)),c=r.map((e=>e.id));if(!r.length)return s(`No Amazon configuration defined for ${i.join()}`),void o();s(`Fetching Amazon bids for ${c.join()}`),apstag.fetchBids({slots:r.map((e=>e.amazonObject)),timeout:e.timeout},(function(e){s(`Finished Amazon bids for ${c.join()}`),t(e),o()}))},setTargeting:function(e){const t=e.filter((e=>e.amazonObject)),n=t.map((e=>e.id));t.length&&(s(`Setting Amazon targeting for ${n.join()}`),apstag.setDisplayBids())}}}(e.amazon)),e.prebid&&e.prebid.slots&&e.prebid.slots.length&&e.prebid.bidders&&e.prebid.bidders.length&&n.push(function(e){const t=function(e,t){const n=[];return t.forEach((t=>{if(!(e in t.slots))return;const o=t.slots[e];let i=!1;switch(t.name){case"appnexus":i={placementId:o};break;case"criteo":i=t.network?{networkId:t.network,publisherSubId:t.publisherSub+"_"+e.toLowerCase()}:{zoneId:o};break;case"ix":i={siteId:o};break;case"rubicon":i={accountId:t.account,siteId:t.site,zoneId:o};break;case"smartadserver":i={domain:"//prg.smartadserver.com",siteId:t.site,pageId:t.page,formatId:o};break;case"richaudience":Array.isArray(o)||(i={supplyType:"site",pid:o})}i&&n.push({bidder:t.name,params:i})})),n},n=function(t){const n=e.bidders.find((e=>"richaudience"===e.name&&Array.isArray(e.slots[t.code])));return!!n&&{bidder:"richaudience",params:{supplyType:"site",pid:n.slots[t.code]}}},o=function(e){if(!i())return;if(!e)return void s("⛔️ No prebid bids responses");const t=[];Object.keys(e).forEach((n=>{e[n].bids.forEach((e=>{t.push({adUnit:n,bidder:e.bidder,adId:e.adId,status:e.statusMessage,cpm:e.cpm,size:e.size,time:e.timeToRespond})}))})),t.length?r(t):s("⛔️ Empty prebid bids responses")};return function(){const t=document.createElement("script");t.async=!0,t.src=e.jsUrl;const n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],pbjs.que.push((()=>{s("Prebid JS ready"),pbjs.setConfig(e.init),"analytics"in e&&Array.isArray(e.analytics)&&e.analytics.length&&pbjs.enableAnalytics(e.analytics),pbjs.bidderSettings={criteo:{storageAllowed:!0}}}))}(),{id:"prebid",configure:function(o,i){i.forEach((o=>{o.prebidObject=void 0;const i=e.slots.find((e=>e.code===o.code));if(!i)return;o.prebidObject=[{code:o.code,bids:t(o.code,e.bidders),mediaTypes:{banner:{sizes:i.sizes}}}];const s=n(o);s&&o.prebidObject.push({code:o.code,bids:[s],mediaTypes:{banner:{sizes:[...i.sizes,[1,1]]}}})}))},fetch:function(t,n){pbjs.que.push((()=>{const i=t.map((e=>e.id)),r=t.filter((e=>e.prebidObject)),c=r.map((e=>e.id));if(!r.length)return s(`No Prebid configuration defined for ${i.join()}`),void n();s(`Fetching Prebid bids for ${c.join()}`),pbjs.requestBids({adUnits:r.map((e=>e.prebidObject)).flat(),bidsBackHandler:e=>{s(`Finished Prebid bids for ${c.join()}`),o(e),n()},timeout:e.timeout})}))},setTargeting:function(e){pbjs.que.push((()=>{const t=e.filter((e=>e.prebidObject)),n=t.map((e=>e.code)),o=t.map((e=>e.id));t.length&&(s(`Setting Prebid targeting for ${o.join()}`),pbjs.setTargetingForGPTAsync(n,(e=>function(n){return!!t.find((t=>t.id===e.getSlotElementId()&&t.code===n))})))}))}}}(e.prebid)),{configure:function(i,r){let c=(r=[...new Set(r)]).map((e=>({id:e,code:e.replace(/__.+/,"")})));const a=e.manager.slots.map((e=>e.code)),d=e.google.slots.map((e=>e.code));if(c=c.filter((e=>a.includes(e.code))).filter((e=>d.includes(e.code))).filter((e=>document.querySelector(`#${e.id}`))).filter((e=>!o.find((t=>t.id===e.id)))),0===c.length)return void s(`⛔️ Error configuring slots ${r.join()}`);const l=r.filter((e=>!c.find((t=>t.id===e))));r=c.map((e=>e.id)),s(`Configuring slots ${r.join()} (ignoring ${l.join()||"none"})`),c.forEach((e=>o.push(e))),t.configure(i,c),n.map((e=>e.configure(i,c)))},reconfigure:function(e,n){const i=(n=[...new Set(n)]).map((e=>o.find((t=>t.id===e)))).filter(Boolean);i.length?t.reconfigure(e,i):s(`⛔️ Error reconfiguring slots ${n.join()}`)},fetch:function(i=[],r={}){let c=!1,a=!1;const d=i.length?o.filter((e=>i.includes(e.id))):o;if(0===d.length)return void s(`⛔️ Error fetching slots ${i.join()}`);const l=i.filter((e=>!d.find((t=>t.id===e))));i=d.map((e=>e.id)),s(`Fetching slots ${i.join()} (ignoring ${l.join()||"none"})`),t.updateSlotsBeforeFetch(d);const g="disabled"in r?r.disabled:[];g.length&&s(`Disabled ${g.join()} for ${i.join()}`);const u=n.filter((e=>!g.includes(e.id))).map((e=>({library:e,finished:!1}))),f=function(e){e.finished=!0,h()&&(s(`All bidders finished for ${i.join()}`),a&&window.clearTimeout(a),p())},h=function(){return!u.find((e=>!1===e.finished))},p=function(){!0!==c&&(c=!0,t.queue((function(){u.filter((e=>e.finished)).forEach((e=>e.library.setTargeting(d))),t.fetch(d)})))};if(0===u.length)return s(`No bidders configured for ${i.join()}`),void p();u.forEach((e=>{e.library.fetch(d,(function(){f(e)}))})),c?s(`AdServer request already sent for ${i.join()}, check bidders configuration`):a=window.setTimeout((()=>{s(`🐢 Timeout for ${i.join()}`),p()}),e.manager.timeout)},clear:function(e=[]){s(`Clearing slots ${e.length?e.join():"ALL"}`);const n=e.length?o.filter((t=>e.includes(t.id))):o;t.clear(n)},destroy:function(e=[]){s(`Destroying slots ${e.length?e.join():"ALL"}`);const n=e.length?o.filter((t=>e.includes(t.id))):o;!e.length||n.length?(t.destroy(n),o=e.length?o.filter((t=>!e.includes(t.id))):[],function(e){const t=new CustomEvent("hnads.destroy",{detail:e});document.dispatchEvent(t)}(n.map((e=>e.id)))):s(`⛔️ Slots ${e.join()} not found (can not be destroyed)`)}}}(fe);!function(e,t,n){if(s("Loader Didomi-PayWall"),"didomi-paywall"!==t.loader.name)throw new Error(`Invalid loader: ${t.loader.name}`);const o=function(){const e=t.manager.getPageConfigFn();if(S())return s("Google consent was accepted ➡️ Fetching ads"),void i(e);if(_()&&!Didomi.shouldConsentBeCollected())return void s("Google consent was collected & rejected ➡️ ⛔️ Ads are disabled");s("Waiting for Google consent ...");let n=!1;Didomi.on("consent.changed",(function(){_()?s("Google consent rejected ➡️ ⛔️ Ads are disabled"):!n&&S()&&(n=!0,s("Google consent accepted ➡️ Fetching ads"),i(e))}))},i=function(o){if(!1!==function(e,t,n){return!("beforeLoadAdsFn"in e.manager)||"function"!=typeof e.manager.beforeLoadAdsFn||!1!==e.manager.beforeLoadAdsFn(e,t,n)||(s("⛔️ Ads are disabled"),!1)}(t,o,e)){if(n.isEnabled())return n.isUnblockedState()?(s("Didomi-PayWall: Paywall is unblocked ➡️ Fetching all slots"),void r(o)):void a(o);r(o)}},r=function(n){const o=w(t);e.configure(n,o),e.fetch(o)},a=function(e){const n=w(t);d(e,n),l(e,n)},d=function(t,o){const i=n.getUnblockedSlotsCodes(o);i.length?(s("Didomi-PayWall: Loading unblocked slots"),e.configure(t,i),e.fetch(i)):s("Didomi-PayWall: ⛔️ Empty unblocked slots")},l=function(t,o){const i=n.getBlockedSlotsCodes(o);i.length?n.isBlockedState()?s("Didomi-PayWall: ⛔️ Blocking pending slots"):n.setExternalCallback((function(n){s(`Didomi-PayWall: Callback invoked with state: ${n}`),!0!==n?(s("Didomi-PayWall: Loading blocked slots"),e.configure(t,i),e.fetch(i)):s("Didomi-PayWall: ⛔️ Blocking pending slots")})):s("Didomi-PayWall: ⛔️ Empty blocked slots")};window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((()=>{s("Event didomiOnReady"),c(o)}))}(pe,fe,he);const me={};me.getPageConfigFn=Q,me.beforeLoadAdsFn=function(e){return q()?(k(e),!1):"undefined"==typeof Didomi||!0!==Didomi.getUserConsentStatusForVendor("google")?(s("Fetch more ads on infinite scroll ➡️ ⛔️ Ads are disabled"),!1):(I(e,[2,5],{code:"intext",selector:".content-modules > p",site:"heraldo"}),function(e,t,n,o){if(!e.prebid)return;const i=e.prebid.bidders.find((e=>"richaudience"===e.name));if(!i)return;const r=i.slots[t];if(!Array.isArray(r))return;const c=r.indexOf(n);-1!==c&&(i.slots[t][c]=o,s(`RichAudience Skin module ➡️ Updated placement ${n} to ${o}`))}(fe,"top","0XGpBN3wjE","QyZDnCHS0l"),!0)},function(e,t,n,o=".henneoHB"){let i=0;const r=function(t,n){var o;e.configure(t,n),o=++i,p(n,"infi_v",o>=20?20:o),e.fetch(n)},c=function(e,t){const o=n.getUnblockedSlotsCodes(t);if(!o.length)return void s("Infinite scroll: ⛔️ Empty unblocked slots");const i=n.isBlockedState()?"blocked":"unknown";s(`Infinite scroll: Paywall is ${i} ➡️ Fetching ONLY unblocked slots`),r(e,o)};document.addEventListener("is.append",(function(e){const i=e.detail.blockId,a=e.detail.dataLayer;s(`Infinite scroll APPEND event for block ${i}`),s(e.detail);const d=document.querySelector(`#${i}`);if(!d||!a)return void s("Invalid infinite scroll APPEND event: missing data");const l=t.getPageConfigFn(a);if("beforeLoadAdsFn"in t&&"function"==typeof t.beforeLoadAdsFn&&!1===t.beforeLoadAdsFn(d,e.detail))return void s(`⛔️ Ads are disabled in block ${i}`);const g=d.querySelectorAll(o);g.forEach((e=>e.id=e.id+"__"+i));const u=[...g].map((e=>e.id));if(0!==u.length){if([...d.querySelectorAll(".__hn_teads")].forEach((e=>e.id=e.id+"__"+i)),n&&n.isEnabled())return n.isUnblockedState()?(s("Infinite scroll: Paywall is unblocked ➡️ Fetching all slots"),void r(l,u)):void c(l,u);r(l,u)}else s("Invalid infinite scroll APPEND event: no ads")})),document.addEventListener("is.history",(function(n){const o=n.detail.blockId,i=n.detail.dataLayer;s(`Infinite scroll HISTORY event for block ${o}`),s(n.detail);const r=[...document.querySelectorAll("#x31, #x41, #sticky, #Sticky")].map((e=>e.id));if(!r.length)return;const c=t.getPageConfigFn(i);e.reconfigure(c,r)})),document.addEventListener("is.destroyBlock",(function(t){const n=t.detail.blockId;s(`Infinite scroll DESTROY event for block ${n}`),s(t.detail);const i=document.querySelector(`#${n}`);if(!i)return void s("Invalid infinite scroll DESTROY event");const r=[...i.querySelectorAll(o)].map((e=>e.id));0!==r.length?e.destroy(r):s("Invalid infinite scroll DESTROY event: no ads")}))}(pe,me,he,".ad-unit")}();